<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Teral</title>
<!-- Metadata -->
<meta name="description" content="A social cycling app that connects riders, tracks routes, and explores the culture of movement through shared experiences." />

<!-- Favicon and Apple Touch Icon -->
<link rel="icon" type="image/png" href="/setup-app-web/icon.png" />
<link rel="apple-touch-icon" href="/setup-app-web/icon.png" />

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website" />
<meta property="og:url" content="https://mori77z.de/setup-app-web/index.html" />
<meta property="og:image" content="/setup-app-web/icon.png" />

<!-- Twitter -->
<meta name="twitter:card" content="/setup-app-web/icon.png" />
<meta name="twitter:image" content="/setup-app-web/icon.png" />
<link href="https://fonts.googleapis.com/css2?family=Kosugi&family=Kosugi+Maru&display=swap" rel="stylesheet">
  <style>
    body {
      background: #f7f7f7;
      font-family: 'Kosugi Maru', Arial, sans-serif;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
    }

    @font-face {
      font-family: "Monster Bike";
      src: url('./assets/Monster-Bike.woff') format('woff');
      font-weight: normal;
      font-style: normal;
      font-display: swap;
    }

    @font-face {
      font-family: "Neo Trash";
      src: url('./assets/NeoTrash.woff') format('woff');
      font-weight: normal;
      font-style: normal;
      font-display: swap;
}

    .auth-logo-bar {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 1em;
      margin-bottom: 1em;
    }
    .auth-logo {
      font-family: Kosugi, Arial, sans-serif;
      font-size: 3.3em;
      letter-spacing: -0.1em;
      text-align: center;
      user-select: none;
      display: flex;
      font-weight: 600;
      flex-direction: column;
      gap: -4px;
      align-items: center;
    }
    .auth-logo span {
      font-family: 'Kosugi Maru', Arial, sans-serif;
      font-size: 18px;
      font-weight: 400;
      letter-spacing: 0em;
    }
    .auth-container {
      background: #fff;
      padding: 2.5em 2em 2em 2em;
      text-align: center;
    }
    .auth-tabs {
      display: flex;
      justify-content: center;
      margin-bottom: 2em;
    }
    .auth-tab {
      flex: 1;
      padding: 0.7em 0;
      cursor: pointer;
      font-weight: bold;
      border: none;
      background: none;
      border-bottom: 2px solid transparent;
      font-size: 1.1em;
      color: black;
      transition: border 0.2s, color 0.2s;
      font-family: 'Kosugi Maru', Arial, sans-serif;
    }
    .auth-tab.active {
      border-bottom: 2.5px solid #2e8b57;
      color: #2e8b57;
    }
    .auth-form label {
      display: block;
      text-align: left;
      margin: 1.2em 0 0.3em 0;
      font-size: 1em;
      font-weight: 500;
      font-family: 'Kosugi Maru', Arial, sans-serif;
    }
    .auth-form input, .auth-form select {
      width: 100%;
      padding: 0.7em;
      border-radius: 0.5em;
      border: 1px solid #bbb;
      font-size: 1em;
      margin-bottom: 0.2em;
      background: #fafafa;
      box-sizing: border-box;
      font-family: 'Kosugi Maru', Arial, sans-serif;
    }
    .auth-form button[type="submit"] {
      width: 100%;
      margin-top: 1.5em;
      padding: 0.8em;
      background: #2e8b57;
      color: #fff;
      border: none;
      border-radius: 0.5em;
      font-size: 1.1em;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s;
      font-family: 'Kosugi Maru', Arial, sans-serif;
    }
    .auth-form button[type="submit"]:hover {
      background: #226b43;
    }
    .microcopy {
      color: #666;
      font-size: 0.98em;
      margin-bottom: 1.5em;
      margin-top: 0.5em;
      line-height: 1.5;
      font-family: 'Kosugi Maru', Arial, sans-serif;
    }
    .onboarding-step {
      display: none;
      animation: fadeIn 0.3s;
    }
    .onboarding-step.active {
      display: block;
    }
    .onboarding-progress {
      margin: 1em 0 1.5em 0;
      font-size: 0.95em;
      color: #888;
      font-family: 'Kosugi Maru', Arial, sans-serif;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to   { opacity: 1; }
    }
    .success-message {
      color: #2e8b57;
      font-weight: bold;
      margin: 1.5em 0 0.5em 0;
      font-size: 1.1em;
      font-family: 'Kosugi Maru', Arial, sans-serif;
    }
    a {
      color: #2e8b57;
      text-decoration: underline;
      cursor: pointer;
      font-family: 'Kosugi Maru', Arial, sans-serif;
    }
    
    .next-step {
      margin-top: 1em;
      padding: 0.4em;
      background: #2e8b57;
      color: #fff;
      border: none;
      border-radius: 0.4em;
      font-size: 1em;
      cursor: pointer;
      transition: background 0.2s;
      font-family: 'Kosugi Maru', Arial, sans-serif;
    }
    .auth-form button[type="submit"]:hover {
      background: #226b43;
    }
  </style>
</head>
<body>
  <div class="auth-logo-bar">
    <div class="auth-logo">
      Teral
      <span>Social Cycling App</span>
    </div>
  </div>
  <div class="auth-container">
    <div class="auth-tabs">
      <button class="auth-tab active" id="login-tab" type="button">Login</button>
      <button class="auth-tab" id="register-tab" type="button">Register</button>
    </div>

    <!-- Login Form -->
    <form id="login-form" class="auth-form">
      <div class="microcopy">
        Welcome back! Log in to continue your journey.<br>
        <span style="font-size:0.95em;">Teral is about where you are not whats your rank!</span>
      </div>
      <label for="login-email">Email</label>
      <input type="email" id="login-email" required autocomplete="username" placeholder="you@email.com" />
      <label for="login-password">Password</label>
      <input type="password" id="login-password" required autocomplete="current-password" placeholder="Password" />
      <button type="submit">Login</button>
      <div class="microcopy" style="margin-top:1em;">
        New here? <a href="#" id="switch-to-register">Create an account</a>
      </div>
    </form>

    <!-- Registration/Onboarding Form -->
    <form id="register-form" class="auth-form" style="display:none;">
      <div class="microcopy">
        Welcome to Teral!<br>
        <b>We believe every ride is a story.</b><br>
        Let's set up your profile so you can get the most out of your cycling adventures.
      </div>
      <div class="onboarding-progress" id="onboarding-progress">Step 1 of 5</div>
      <div class="onboarding-step active" data-step="1">
        <label for="reg-email">Email</label>
        <input type="email" id="reg-email" required autocomplete="username" placeholder="you@email.com" />
        <label for="reg-password">Password</label>
        <input type="password" id="reg-password" required autocomplete="new-password" placeholder="Create a password" />
        <button type="button" class="next-step">Next</button>
      </div>
      <div class="onboarding-step" data-step="2">
        <label for="reg-name">Your Name</label>
        <input type="text" id="reg-name" required placeholder="e.g. Moritz" />
        <label for="reg-photo">Profile Photo</label>
        <input type="file" id="reg-photo" accept="image/*" style="margin-bottom:0.7em;" />
        <div class="microcopy">Your name and photo will be shown on your profile and to your friends.</div>
        <button type="button" class="next-step">Next</button>
      </div>
      <div class="onboarding-step" data-step="3">
        <label for="reg-bike">What bike do you ride?</label>
        <input type="text" id="reg-bike" required placeholder="e.g. Gravel bike, 28 inch" />
        <label for="reg-fitness">Fitness level</label>
        <select id="reg-fitness" required>
          <option value="">Select</option>
          <option value="Beginner (10–12 km/h)">Beginner (10–12 km/h)</option>
          <option value="Intermediate (12–14 km/h)">Intermediate (12–14 km/h)</option>
          <option value="Advanced (14–16 km/h)">Advanced (14–16 km/h)</option>
          <option value="Pro (16+ km/h)">Pro (16+ km/h)</option>
        </select>
        <button type="button" class="next-step">Next</button>
      </div>
      <div class="onboarding-step" data-step="4">
        <label for="reg-sleep">Sleeping preference</label>
        <select id="reg-sleep" required>
          <option value="">Select</option>
          <option value="Camping">Camping</option>
          <option value="Guesthouses">Guesthouses</option>
          <option value="Hotels">Hotels</option>
          <option value="Mixed">Mixed</option>
        </select>
        <label for="reg-region">Favorite region</label>
        <input type="text" id="reg-region" required placeholder="e.g. Brandenburg & Baltic Sea" />
        <button type="button" class="next-step">Next</button>
      </div>
      <div class="onboarding-step" data-step="5">
        <div class="microcopy">
          <b>You're all set!</b><br>
          Teral is about sharing, discovering, and enjoying the ride.<br>
          Your profile is ready to inspire and connect with others.<br>
          <span style="color:#2e8b57;">Let's get rolling!</span>
        </div>
        <button type="submit">Finish & Go to Profile</button>
      </div>
    </form>
    <div id="register-success" class="success-message" style="display:none;">
      Registration successful! Redirecting to your profile...
    </div>
  </div>

<script>
const iframe = document.getElementById('app-frame');
const controlHint = document.getElementById('control-hint');
const demoBubble = document.getElementById('demo-bubble');

const demoSteps = [
  { page: 'start.html', action: 'addLogEntry', bubble: 'Ich schreibe einen kurzen Log.', scroll: 0 },
  { page: 'start.html', action: 'showRouteInsteadOfLike', bubble: 'Ich öffne eine gespeicherte Route.', scroll: 800 },
  { page: 'start.html', action: 'showRoute', bubble: 'Ich zeige eine gespeicherte Route.', scroll: 300 },
  { page: 'plan.html', action: 'planAndSaveRoute', bubble: 'Ich plane und speichere eine neue Tour.', scroll: 0 },
  { page: 'plan.html', action: 'showPlannedRoute', bubble: 'Ich zeige die geplante Tour an.', scroll: 0 },
  { page: 'profile.html', action: 'openSettings', bubble: 'Ich öffne die Einstellungen.', scroll: 0 },
  { page: 'profile.html', action: 'closeSettings', bubble: 'Ich schließe die Einstellungen.', scroll: 0 }
];

const actionMap = {
  addLogEntry: demoAddLogEntry,
  showRouteInsteadOfLike: demoShowRouteInsteadOfLike,
  showRoute: demoShowRoute,
  planAndSaveRoute: demoPlanAndSaveRoute,
  showPlannedRoute: demoShowPlannedRoute,
  openSettings: demoOpenSettings,
  closeSettings: demoCloseSettings
};

let demoStep = 0;
let demoActive = true;
let userInteracted = false;
let inactivityTimeout = null;

function showBubble(msg) {
  demoBubble.textContent = msg;
  demoBubble.style.display = 'block';
  demoBubble.style.opacity = '1';
  setTimeout(() => {
    demoBubble.style.opacity = '0';
    setTimeout(() => demoBubble.style.display = 'none', 400);
  }, 3200);
}

function showControlHint() {
  controlHint.textContent = "Du kannst jetzt selber steuern! 😊";
  controlHint.classList.add('visible');
}

function hideControlHint() {
  controlHint.classList.remove('visible');
}

function runDemoStep() {
  if (!demoActive) return;
  if (demoStep >= demoSteps.length) {
    demoActive = false;
    showControlHint();
    return;
  }
  hideControlHint();

  const step = demoSteps[demoStep];
  iframe.src = step.page;

  iframe.onload = () => {
    setTimeout(async () => {
      showBubble(step.bubble);

      if (step.scroll && step.scroll > 0) {
        try {
          iframe.contentWindow.scrollTo({ top: step.scroll, behavior: 'smooth' });
        } catch (e) {}
      }

      if (actionMap[step.action]) {
        await new Promise(res => setTimeout(res, 900));
        await actionMap[step.action]();
      } else {
        iframe.contentWindow.postMessage({ demoAction: step.action }, '*');
      }

      window.postMessage({ demoDone: true }, '*');
    }, 900);
  };
}

window.addEventListener('message', (e) => {
  if (e.data && e.data.demoDone && demoActive) {
    demoStep++;
    if (demoStep < demoSteps.length) {
      setTimeout(runDemoStep, 7000 + Math.random() * 2000);
    } else {
      demoActive = false;
      showControlHint();
    }
  }
});

function onUserInteract() {
  if (userInteracted) return;
  userInteracted = true;
  demoActive = false;
  showControlHint();

  clearTimeout(inactivityTimeout);
  inactivityTimeout = setTimeout(() => {
    userInteracted = false;
    demoActive = true;
    hideControlHint();
    runDemoStep();
  }, 10000);
}

window.addEventListener('mousemove', onUserInteract, { once: true });
window.addEventListener('keydown', onUserInteract, { once: true });

window.addEventListener('mousemove', () => {
  if (!userInteracted) return;
  clearTimeout(inactivityTimeout);
  inactivityTimeout = setTimeout(() => {
    userInteracted = false;
    demoActive = true;
    hideControlHint();
    runDemoStep();
  }, 10000);
});
window.addEventListener('keydown', () => {
  if (!userInteracted) return;
  clearTimeout(inactivityTimeout);
  inactivityTimeout = setTimeout(() => {
    userInteracted = false;
    demoActive = true;
    hideControlHint();
    runDemoStep();
  }, 10000);
});

const cursor = document.getElementById('demo-cursor');
async function clickWithCursor(selector, delay = 400) {
  const el = iframe.contentDocument.querySelector(selector);
  if (!el) return;

  const rect = el.getBoundingClientRect();
  const iframeRect = iframe.getBoundingClientRect();

  const cursorX = iframeRect.left + rect.left + rect.width / 2;
  const cursorY = iframeRect.top + rect.top + rect.height / 2;

  cursor.style.left = `${cursorX - 16}px`;
  cursor.style.top = `${cursorY - 16}px`;
  cursor.style.display = 'block';

  await new Promise(res => setTimeout(res, delay));
  el.dispatchEvent(new MouseEvent('click', { bubbles: true }));
  await new Promise(res => setTimeout(res, 400));
  cursor.style.display = 'none';
}

// Neue Aktionen

async function demoAddLogEntry() {
  showBubble('Ich öffne das Plus-Menü...');
  await clickWithCursor('#plus-button', 400);
  await new Promise(res => setTimeout(res, 700));

  showBubble('Ich wähle "Log-Eintrag"...');
  await clickWithCursor('#add-log', 400);
  await new Promise(res => setTimeout(res, 700));

  showBubble('Ich schreibe einen kurzen Text...');
  await typeText('#log-text', "Felt truly connected out there today. 🌤️🚴‍♂️", 60);
  await new Promise(res => setTimeout(res, 500));

  showBubble('Ich speichere den Log...');
  await clickWithCursor('#submit-log', 400);
  await new Promise(res => setTimeout(res, 900));
}

async function demoShowRouteInsteadOfLike() {
  await smoothScrollTo('.route-list', -60, 1000);
  await new Promise(res => setTimeout(res, 400));

  showBubble('Ich öffne eine gespeicherte Route...');
  await clickWithCursor('.show-route-btn', 400);
  await new Promise(res => setTimeout(res, 800));
}

// Vorhandene Aktionen

async function demoShowRoute() {
  showBubble('Ich öffne gespeicherte Routen...');
  await clickWithCursor('#show-route', 400);
  await new Promise(res => setTimeout(res, 800));
}

async function demoPlanAndSaveRoute() {
  showBubble('Ich öffne die Routenplanung...');
  await clickWithCursor('#plan-route', 400);
  await new Promise(res => setTimeout(res, 800));
  showBubble('Ich plane die Route...');
  await typeText('#route-name', 'Abenteuer-Tour');
  await new Promise(res => setTimeout(res, 600));
  showBubble('Ich speichere die Route...');
  await clickWithCursor('#save-route', 400);
  await new Promise(res => setTimeout(res, 900));
}

async function demoShowPlannedRoute() {
  showBubble('Ich zeige die gespeicherte Tour an...');
  await clickWithCursor('#show-planned-route', 400);
  await new Promise(res => setTimeout(res, 800));
}

async function demoOpenSettings() {
  showBubble('Ich öffne die Einstellungen...');
  await clickWithCursor('#open-settings', 400);
  await new Promise(res => setTimeout(res, 600));
}

async function demoCloseSettings() {
  showBubble('Ich schließe die Einstellungen...');
  await clickWithCursor('#close-settings', 400);
  await new Promise(res => setTimeout(res, 600));
}

async function typeText(selector, text, delay = 80) {
  const el = iframe.contentDocument.querySelector(selector);
  if (!el) return;
  el.focus();
  el.value = '';
  for (let i=0; i<text.length; i++) {
    el.value += text[i];
    el.dispatchEvent(new Event('input', { bubbles: true }));
    await new Promise(res => setTimeout(res, delay));
  }
}

async function smoothScrollTo(selector, offset = 0, duration = 800) {
  const el = iframe.contentDocument.querySelector(selector);
  if (!el) return;
  const rect = el.getBoundingClientRect();
  const iframeWin = iframe.contentWindow;
  const targetY = rect.top + iframeWin.scrollY + offset;
  const startY = iframeWin.scrollY;
  const diff = targetY - startY;
  const steps = 30;
  for (let i=0; i<=steps; i++) {
    iframeWin.scrollTo({ top: startY + diff * (i/steps) });
    await new Promise(res => setTimeout(res, duration/steps));
  }
}

runDemoStep();
</script>

</body>
</html>
